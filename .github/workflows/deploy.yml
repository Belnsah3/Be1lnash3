# –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ - –Ω–∞—Å—Ç—Ä–æ–π —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub —Å–Ω–∞—á–∞–ª–∞!
# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: —Å–º. GITHUB_ACTIONS_SETUP.md

name: Deploy to Server (DISABLED)

on:
  # push:
  #   branches: [ main ]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: üì• Checkout code
      uses: actions/checkout@v3
    
    - name: üì° Deploy to server
      uses: appleboy/ssh-action@master
      with:
        # –ù–∞—Å—Ç—Ä–æ–π —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub: Settings ‚Üí Secrets ‚Üí Actions
        host: ${{ secrets.SERVER_HOST || '147.45.48.64' }}
        username: ${{ secrets.SERVER_USER || 'root' }}
        key: ${{ secrets.SERVER_SSH_KEY || 'not-configured' }}
        script: |
          cd ~/rest-api
          echo "üì• Pulling latest changes..."
          git pull origin main
          echo "üì¶ Installing dependencies..."
          npm install --production
          echo "üîÑ Restarting application..."
          ./restart.sh app
          echo "‚úÖ Deployment complete!"
