# G4F Update Report

**Date:** 2025-11-08 12:30 UTC+3  
**Action:** Update g4f to latest version

---

## ‚úÖ **–ß–¢–û –°–î–ï–õ–ê–ù–û:**

### **1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ g4f**
```bash
pip install --upgrade git+https://github.com/xtekky/gpt4free.git
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏—è –∏–∑ GitHub (commit 4d98885)
- ‚úÖ –ë—ã–ª–∞ –≤–µ—Ä—Å–∏—è: 6.5.7
- ‚úÖ –°—Ç–∞–ª–∞ –≤–µ—Ä—Å–∏—è: 0.0.0 (dev from GitHub)

### **2. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Python G4F API**
```bash
pm2 restart python-g4f
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ API –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ Uvicorn running on port 5000

---

## ‚ùå **–ü–†–û–ë–õ–ï–ú–ê –û–°–¢–ê–õ–ê–°–¨:**

### **Event Loop Conflict**

**–û—à–∏–±–∫–∏:**
```
WARNING:main:–ü—Ä–æ–≤–∞–π–¥–µ—Ä auto –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: this event loop is already running
WARNING:main:–ü—Ä–æ–≤–∞–π–¥–µ—Ä Airforce –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: Provider not found: Airforce
```

**–ü—Ä–∏—á–∏–Ω–∞:**
G4F –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π event loop, –Ω–æ Uvicorn —É–∂–µ –∑–∞–ø—É—Å—Ç–∏–ª —Å–≤–æ–π. –≠—Ç–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç asyncio event loops.

---

## üîç **–ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú–´:**

### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
Uvicorn (async event loop)
    ‚Üì
FastAPI (main.py)
    ‚Üì
G4F Library (–ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π event loop)
    ‚Üì
‚ùå –ö–û–ù–§–õ–ò–ö–¢!
```

### **–ü–æ—á–µ–º—É –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. Uvicorn –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π event loop
2. G4F –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–≤–æ–π event loop –≤–Ω—É—Ç—Ä–∏
3. Python –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ event loops
4. –†–µ–∑—É–ª—å—Ç–∞—Ç: "event loop is already running"

---

## üí° **–†–ï–®–ï–ù–ò–Ø:**

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å nest_asyncio** ‚≠ê –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø

–î–æ–±–∞–≤–∏—Ç—å –≤ `main.py`:
```python
import nest_asyncio
nest_asyncio.apply()
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç g4f —Ä–∞–±–æ—Ç–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ event loop.

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä—è–º—ã–µ API –∫–ª—é—á–∏**

–í–º–µ—Å—Ç–æ g4f –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ API:
- OpenAI API
- Anthropic Claude API
- Google Gemini API

### **–í–∞—Ä–∏–∞–Ω—Ç 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å g4f –æ—Ç–¥–µ–ª—å–Ω–æ**

–ó–∞–ø—É—Å—Ç–∏—Ç—å g4f –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –Ω–µ —á–µ—Ä–µ–∑ Uvicorn:
```bash
python3 -m g4f.api
```

---

## üéØ **–†–ï–ö–û–ú–ï–ù–î–£–ï–ú–û–ï –†–ï–®–ï–ù–ò–ï:**

### **–ò—Å–ø—Ä–∞–≤–∏—Ç—å main.py —Å nest_asyncio:**

```python
# –í –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ main.py –¥–æ–±–∞–≤–∏—Ç—å:
import nest_asyncio
nest_asyncio.apply()

# –≠—Ç–æ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ requirements.txt
# –ü—Ä–æ—Å—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ nest_asyncio —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç event loops

---

## üìä **–¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°:**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|-------------|
| g4f –≤–µ—Ä—Å–∏—è | ‚úÖ Latest | 0.0.0 (dev from GitHub) |
| Python G4F API | ‚úÖ Running | Port 5000, Uvicorn online |
| Admin Key | ‚úÖ –í –ë–î | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç |
| Event Loop | ‚ùå Conflict | –ù—É–∂–µ–Ω nest_asyncio.apply() |
| –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã | ‚ùå Not working | –ò–∑-–∑–∞ event loop |

---

## ‚úÖ **–°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:**

1. **–î–æ–±–∞–≤–∏—Ç—å nest_asyncio.apply() –≤ main.py**
   ```bash
   cd ~/rest-api/python-g4f
   # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å main.py
   # –î–æ–±–∞–≤–∏—Ç—å –≤ –Ω–∞—á–∞–ª–æ:
   # import nest_asyncio
   # nest_asyncio.apply()
   ```

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å API**
   ```bash
   pm2 restart python-g4f
   ```

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å**
   ```bash
   curl https://lumeai.ru/api/v1/ai/chat/completions \
     -H "Authorization: Bearer YOUR_KEY" \
     -H "Content-Type: application/json" \
     -d '{"model":"gpt-3.5-turbo","messages":[{"role":"user","content":"Hello"}]}'
   ```

---

## üèÜ **–í–´–í–û–î–´:**

### **G4F –æ–±–Ω–æ–≤–ª–µ–Ω –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏** ‚úÖ

- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ dev –≤–µ—Ä—Å–∏—è –∏–∑ GitHub
- ‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã
- ‚ùå –ù–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å event loop –∫–æ–Ω—Ñ–ª–∏–∫—Ç

### **–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–µ:**
–î–æ–±–∞–≤–∏—Ç—å 2 —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞ –≤ main.py:
```python
import nest_asyncio
nest_asyncio.apply()
```

**–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ g4f –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é!** üöÄ

---

## üìù **–ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ê:**

–ï—Å–ª–∏ g4f –Ω–µ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ —Å nest_asyncio, –º–æ–∂–Ω–æ:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ API:**
   - OpenAI (–ø–ª–∞—Ç–Ω–æ, –Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ)
   - Anthropic Claude (–ø–ª–∞—Ç–Ω–æ)
   - Google Gemini (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ –ª–∏–º–∏—Ç–∞)

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:**
   - `openai` - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
   - `anthropic` - Claude API
   - `google-generativeai` - Gemini

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å g4f –æ—Ç–¥–µ–ª—å–Ω–æ:**
   - –û—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É
   - LumeAI –±—É–¥–µ—Ç –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã

---

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!** ‚úÖ  
**–ù—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–∏—Ç—å nest_asyncio.apply()** üîß
