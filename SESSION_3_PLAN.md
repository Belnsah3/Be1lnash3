# 📋 Сессия 3: Настройки + Улучшенный Dashboard

## 🎯 Цель
Создать полноценную страницу настроек профиля и улучшить dashboard со статистикой.

---

## 📝 Что нужно сделать:

### 1. **Страница настроек (`/settings`)** 🔧
- ✅ Редактирование профиля
  - Имя пользователя
  - Email
  - Аватар (загрузка/изменение)
  - Био/описание
- ✅ Изменение пароля
  - Текущий пароль
  - Новый пароль
  - Подтверждение пароля
- ✅ Настройка API ключей
  - Добавление/удаление ключей
  - Просмотр текущих ключей
  - Валидация ключей
- ✅ Настройки приватности
  - Видимость профиля
  - История чатов
- ✅ Темная/светлая тема
  - Переключатель темы
  - Сохранение в localStorage

### 2. **Улучшенный Dashboard** 📊
- ✅ Статистика использования
  - Количество чатов
  - Количество сообщений
  - Использованные модели
  - График активности
- ✅ Последние чаты
  - Список последних 5-10 чатов
  - Быстрый доступ
- ✅ Быстрые действия
  - Новый чат
  - Настройки
  - API документация
- ✅ Информация об аккаунте
  - Дата регистрации
  - Статус
  - Квоты (если есть)

### 3. **База данных** 💾
- ✅ Таблица `user_settings`
  - user_id
  - api_key (зашифрован)
  - theme
  - avatar_url
  - bio
  - privacy_settings (JSON)
- ✅ Обновить таблицу `users`
  - Добавить поля для аватара
  - Добавить поля для био

### 4. **API эндпоинты** 🔌
- ✅ `GET /api/v1/settings` - Получить настройки
- ✅ `PUT /api/v1/settings` - Обновить настройки
- ✅ `PUT /api/v1/settings/password` - Изменить пароль
- ✅ `POST /api/v1/settings/avatar` - Загрузить аватар
- ✅ `GET /api/v1/stats` - Получить статистику
- ✅ `POST /api/v1/settings/api-key` - Добавить API ключ
- ✅ `DELETE /api/v1/settings/api-key` - Удалить API ключ

---

## 🎨 Дизайн

### Страница настроек:
```
┌─────────────────────────────────────┐
│ ⚙️ Настройки                        │
├─────────────────────────────────────┤
│                                     │
│ ┌──── Профиль ────┐                │
│ │ 👤 Аватар       │                │
│ │ 📧 Email        │                │
│ │ 📝 Био          │                │
│ └─────────────────┘                │
│                                     │
│ ┌──── Безопасность ────┐           │
│ │ 🔒 Изменить пароль  │           │
│ │ 🔑 API ключи        │           │
│ └─────────────────────┘            │
│                                     │
│ ┌──── Внешний вид ────┐            │
│ │ 🌙 Тема             │            │
│ │ 🎨 Цвета            │            │
│ └─────────────────────┘            │
│                                     │
└─────────────────────────────────────┘
```

### Улучшенный Dashboard:
```
┌─────────────────────────────────────┐
│ 📊 Dashboard                        │
├─────────────────────────────────────┤
│                                     │
│ ┌──── Статистика ────┐             │
│ │ 💬 Чатов: 15       │             │
│ │ 📝 Сообщений: 127  │             │
│ │ 🤖 Моделей: 5      │             │
│ └────────────────────┘             │
│                                     │
│ ┌──── Последние чаты ────┐         │
│ │ • Чат 1              │           │
│ │ • Чат 2              │           │
│ │ • Чат 3              │           │
│ └──────────────────────────┘       │
│                                     │
│ ┌──── Быстрые действия ────┐       │
│ │ [+ Новый чат]          │         │
│ │ [⚙️ Настройки]         │         │
│ │ [📚 API Docs]          │         │
│ └────────────────────────┘         │
│                                     │
└─────────────────────────────────────┘
```

---

## 📂 Файлы для создания/изменения:

### Новые файлы:
- ✅ `public/settings.html` - Страница настроек
- ✅ `src/routes/settings.js` - API для настроек
- ✅ `src/routes/stats.js` - API для статистики

### Изменяемые файлы:
- ✅ `public/dashboard.html` - Улучшить дизайн и добавить статистику
- ✅ `src/database/db.js` - Добавить таблицу user_settings
- ✅ `src/server.js` - Добавить новые маршруты

---

## 🔄 Порядок выполнения:

1. **База данных** (10 мин)
   - Создать таблицу user_settings
   - Обновить схему БД

2. **API эндпоинты** (20 мин)
   - Создать routes/settings.js
   - Создать routes/stats.js
   - Интегрировать в server.js

3. **Страница настроек** (30 мин)
   - Создать settings.html
   - Форма профиля
   - Форма изменения пароля
   - Управление API ключами
   - Переключатель темы

4. **Улучшить Dashboard** (20 мин)
   - Добавить статистику
   - Последние чаты
   - Быстрые действия
   - Улучшить дизайн

---

## ✨ Дополнительные фичи (опционально):

- 📸 Кроппинг аватара
- 📊 Графики активности (Chart.js)
- 🔔 Настройки уведомлений
- 🌍 Выбор языка
- 🎨 Кастомизация цветовой схемы
- 📥 Экспорт данных
- 🗑️ Удаление аккаунта

---

## 🎯 Результат:

После завершения Сессии 3:
- ✅ Полнофункциональные настройки профиля
- ✅ Информативный dashboard со статистикой
- ✅ Управление API ключами
- ✅ Изменение пароля
- ✅ Загрузка аватара
- ✅ Переключение темы

**Прогресс:** ~90% готовности всего проекта!

---

## 📊 Прогресс Сессии 3:

**Сессия 1:** ✅ Регистрация + Логин (100%)  
**Сессия 2:** ✅ Полнофункциональный чат (100%)  
**Сессия 3:** ⏳ Настройки + Dashboard (0% → 100%)

**Общий прогресс:** ~75% → 90%

---

Начинаем! 🚀
