<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ß–∞—Ç - LumeAI</title>
    <link rel="stylesheet" href="/css/main.css">
    <style>
        body { margin: 0; height: 100vh; overflow: hidden; }
        .chat-layout { display: flex; height: 100vh; }
        .chat-main { flex: 1; display: flex; flex-direction: column; margin-left: 240px; }
        .chat-header { padding: 16px 24px; background: var(--card); border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
        .chat-messages { flex: 1; overflow-y: auto; padding: 20px; }
        .message { margin-bottom: 20px; display: flex; gap: 12px; }
        .message-avatar { width: 36px; height: 36px; border-radius: 8px; background: var(--primary); display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .message-content { flex: 1; background: var(--card); padding: 12px 16px; border-radius: 12px; }
        .chat-input-container { padding: 20px 24px; border-top: 1px solid var(--border); background: var(--card); }
        .chat-input { width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); resize: none; font-family: inherit; }
        .empty-chat { text-align: center; padding: 60px 20px; color: var(--text-secondary); }
        @media (max-width: 768px) { .chat-main { margin-left: 0; } }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-logo">üí¨ LumeAI</div>
        <a href="/dashboard" class="sidebar-item"><span class="sidebar-icon">üè†</span> Dashboard</a>
        <a href="/chat" class="sidebar-item active"><span class="sidebar-icon">üí¨</span> –ß–∞—Ç</a>
        <a href="/models" class="sidebar-item"><span class="sidebar-icon">ü§ñ</span> –ú–æ–¥–µ–ª–∏</a>
        <a href="/keys" class="sidebar-item"><span class="sidebar-icon">üîë</span> API –ö–ª—é—á–∏</a>
        <a href="/activity" class="sidebar-item"><span class="sidebar-icon">üìä</span> –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</a>
        <a href="/settings" class="sidebar-item"><span class="sidebar-icon">‚öôÔ∏è</span> –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
        <div style="margin-top: auto; padding-top: 20px; border-top: 1px solid var(--border);"><button class="btn btn-danger" onclick="logout()" style="width: 100%;">–í—ã–π—Ç–∏</button></div>
    </div>

    <div class="chat-main">
        <div class="chat-header">
            <h2 style="margin: 0;">–ß–∞—Ç —Å AI</h2>
            <select class="btn btn-secondary" style="padding: 8px 12px;">
                <option>GPT-4</option>
                <option>Claude Sonnet</option>
                <option>Gemini Flash</option>
            </select>
        </div>

        <div class="chat-messages" id="messages">
            <div class="empty-chat">
                <div style="font-size: 64px; margin-bottom: 16px;">üí¨</div>
                <h2>–ù–∞—á–Ω–∏—Ç–µ –Ω–æ–≤—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä</h2>
                <p>–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∏–∂–µ —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥ —Å AI</p>
            </div>
        </div>

        <div class="chat-input-container">
            <textarea class="chat-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." rows="3" id="input" onkeydown="if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();send();}"></textarea>
            <button class="btn btn-primary" style="margin-top: 12px; width: 100%;" onclick="send()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </div>
    </div>

    <div class="mobile-menu">
        <a href="/dashboard" class="menu-item"><div class="menu-icon">üè†</div><div>–ì–ª–∞–≤–Ω–∞—è</div></a>
        <a href="/chat" class="menu-item active"><div class="menu-icon">üí¨</div><div>–ß–∞—Ç</div></a>
        <a href="/keys" class="menu-item"><div class="menu-icon">üîë</div><div>–ö–ª—é—á–∏</div></a>
        <a href="/settings" class="menu-item"><div class="menu-icon">‚öôÔ∏è</div><div>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div></a>
    </div>

    <script>
        function send() {
            const input = document.getElementById('input');
            const text = input.value.trim();
            if (!text) return;
            
            const messages = document.getElementById('messages');
            const isEmpty = messages.querySelector('.empty-chat');
            if (isEmpty) messages.innerHTML = '';
            
            messages.innerHTML += `
                <div class="message">
                    <div class="message-avatar">üë§</div>
                    <div class="message-content">${text.replace(/\n/g, '<br>')}</div>
                </div>
            `;
            input.value = '';
            messages.scrollTop = messages.scrollHeight;
        }
        function logout() { fetch('/api/v1/auth/logout', { method: 'POST' }).then(() => { window.location.href = '/login'; }); }
    </script>
</body>
</html>
